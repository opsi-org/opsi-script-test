[Actions]
encoding=utf8
comment "Testing: "
message "GetValueFromInifile"

DefVar $TestResult$
DefVar $OS$
DefVar $HomeTestFiles$
DefVar $strresult$
DefVar $testfile$
DefVar $ConstTest$
DefVar $CompValue$
DefStringList $list1$
DefStringList $list2$

set $HomeTestFiles$ = "%scriptpath%\..\test-files\encoding\"
set $ConstTest$ = "üöäÜÖÄß"
set $testfile$ = $HomeTestFiles$+"test_uft16le.ini"
set $CompValue$ = GetValueFromIniFile($testfile$,"umlaut","nam1","")
if ($ConstTest$ = $CompValue$)
	comment "passed"
else
	LogWarning "failed"
endif
set $testfile$ = $HomeTestFiles$+"test_uft16lebom.ini"
set $CompValue$ = GetValueFromIniFile($testfile$,"umlaut","nam1","")
if ($ConstTest$ = $CompValue$)
	comment "passed"
else
	LogWarning "failed"
endif

set $testfile$ = $HomeTestFiles$+"test_uft8.ini"
set $CompValue$ = GetValueFromIniFile($testfile$,"umlaut","nam1","")
if ($ConstTest$ = $CompValue$)
	comment "passed"
else
	LogWarning "failed"
endif
set $testfile$ = $HomeTestFiles$+"test_cp1252.ini"
set $CompValue$ = GetValueFromIniFile($testfile$,"umlaut","nam1","")
if ($ConstTest$ = $CompValue$)
	comment "passed"
else
	LogWarning "failed"
endif
